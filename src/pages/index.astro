---
import PostCard from '../components/PostCard.astro';
import { getAllArticles } from '../utils/articles';
import '../styles/global.css';

// Get all articles using the helper function
const posts = await getAllArticles();

// Get all unique tags from articles
const allTags = [...new Set(posts.flatMap(post => post.tags || []))].sort();
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Alex Posts âœ¨</title>
	</head>
    <body class="antialiased selection:bg-pink-500/30">
        <main class="relative mx-auto max-w-3xl px-6 py-20 text-[--text]">
			<header class="mb-20 text-center">
				<div class="inline-flex items-center justify-center p-1 mb-8 rounded-full bg-white/5 border border-white/10 backdrop-blur-md">
					<a href="/about/" class="flex items-center gap-3 px-1 pr-4">
						<img 
							src="/profile_icon.jpg" 
							alt="Profile" 
							class="w-8 h-8 rounded-full object-cover border border-white/20"
						/>
						<span class="text-sm font-medium text-gray-300 hover:text-white transition-colors">By Alex</span>
					</a>
				</div>

				<h1 class="text-5xl md:text-7xl font-bold mb-6 tracking-tight bg-clip-text text-transparent bg-gradient-to-b from-white to-white/60">
					Alex Posts
				</h1>
				
				<p class="text-xl text-gray-400 max-w-xl mx-auto leading-relaxed">
					Insights and thoughts on technology and development, with a focus on React, its ecosystem, PostgreSQL, and all things JavaScript.
				</p>
			</header>
			
            <section id="posts-container" class="grid gap-8 animate-fade-in">
				{posts.map((post, index) => (
					<div style={`animation-delay: ${index * 100}ms`}>
						<PostCard
							title={post.title}
							publishDate={post.publishDate}
							description={post.description}
							slug={post.slug}
							readingTime={post.readingTime}
							tags={post.tags}
						/>
					</div>
				))}
			</section>
		</main>
		
		<style>
			.animate-fade-in > div {
				opacity: 0;
				animation: fadeIn 0.8s ease-out forwards;
			}

			@keyframes fadeIn {
				from { opacity: 0; transform: translateY(20px); }
				to { opacity: 1; transform: translateY(0); }
			}
		</style>
	</body>
</html>

